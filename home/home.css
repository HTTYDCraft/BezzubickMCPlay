/* Разрешаем выделение текста на главной (overrides из /links/css/style.css) */
.card, .card * { user-select: text !important; -webkit-user-select: text !important; }

/* Глобальный box-sizing, чтобы width:100% с padding не вылезали за контейнер */
html { box-sizing: border-box; }
*, *::before, *::after { box-sizing: inherit; }

/* HERO */
.hero { text-align:center; }
.hero .avatar {
    width:112px; height:112px; border-radius:9999px; object-fit:cover;
    border:4px solid var(--md-sys-color-primary-dark); display:block; margin:0 auto 16px;
}
.hero h1 { font-size:2.25rem; margin:0 0 6px; }
.hero p { margin:0 0 8px; opacity:.9; }
.hero .followers { color: rgba(255,255,255,.72) !important; }
body.light-theme .hero .followers { color: rgba(0,0,0,.64) !important; }
.hero-cta { margin-top: 12px; }
.hero .cta { display:flex; flex-wrap:wrap; justify-content:center; gap:12px; }

/* Markdown */
.md h2 { font-size:1.6rem; font-weight:700; margin:1rem 0 .5rem; }
.md h3 { font-size:1.25rem; font-weight:700; margin:1rem 0 .5rem; }
.md p { margin:.5rem 0; line-height:1.7; }
.md ul { margin:.5rem 0 .75rem 1.15rem; list-style:disc; }
.md li { margin:.25rem 0; }
.md em { font-style:italic; }
.md strong { font-weight:700; }
.md blockquote { margin:.75rem 0; padding:.5rem .75rem; border-left:4px solid var(--md-sys-color-primary-dark); opacity:.95; }
.md code { background:rgba(255,255,255,.08); padding:.1rem .3rem; border-radius:6px; }
.md pre { background: rgba(255,255,255,.08); padding: .75rem; border-radius: 12px; overflow: auto; }
body.light-theme .md pre { background: rgba(0,0,0,.06); }
.md pre code { background: transparent; padding: 0; }

/* Таймлайн и кнопки */
.timeline-controls {
    display:flex; gap:10px; align-items:center; justify-content:space-between; margin: 14px 0 8px;
}
.tl-buttons { display:flex; gap:8px; }
.tl-buttons .tl-btn { display:inline-flex; align-items:center; gap:.5rem; min-height:44px; }
.tl-buttons .tl-btn .material-symbols-outlined { line-height:1; }

/* Иконки-only на телефоне (текст скрыт) */
@media (max-width: 640px) {
    .tl-buttons .tl-btn { padding: 8px; min-width:44px; justify-content:center; }
    .tl-buttons .btn-text { display:none; }
}

/* Плитки таймлайна */
#timeline { display:flex; flex-direction:column; gap:12px; }
#timeline details.card { padding: 14px 18px; border-radius: 16px; }
#timeline details.card summary {
    display:flex; align-items:center; justify-content:space-between; gap:12px; cursor:pointer; list-style:none;
}
#timeline details.card summary::-webkit-details-marker { display:none; }
#timeline details.card summary .material-symbols-outlined { transition: transform .2s ease; }
#timeline details[open] summary .material-symbols-outlined { transform: rotate(180deg); }
#timeline .md { padding-top: 8px; }

/* На десктопе — центрируем ширину таймлайна */
@media (min-width: 992px) {
    #timeline { max-width: 980px; margin: 8px auto 0; }
}

/* Сетка главной (две конфигурации) */
.home-grid { display:grid; gap:24px; }
.home-grid > * { min-width: 0; } /* ключевой фикс: грид-дети могут сжиматься */
#links-cta { grid-area: links; }
#live { grid-area: cal; position:relative; }
#calendar { grid-area: cal2; background: transparent; box-shadow: none; }
#skin { grid-area: skin; }

/* Когда лайва нет: правая колонка — только календарь */
.home-grid.no-live {
    grid-template-columns: 1fr;
    grid-template-areas:
    "links"
    "cal2"
    "skin";
}
@media (min-width: 992px) {
    .home-grid.no-live {
        grid-template-columns: minmax(320px, 420px) 1fr;
        grid-template-areas:
      "links cal2"
      "skin  cal2";
    }
}

/* Когда лайв есть: сверху лайв, ниже календарь */
.home-grid.has-live {
    grid-template-columns: 1fr;
    grid-template-areas:
    "links"
    "cal"
    "cal2"
    "skin";
}
@media (min-width: 992px) {
    .home-grid.has-live {
        grid-template-columns: minmax(320px, 420px) 1fr;
        grid-template-areas:
      "links cal"
      "skin  cal2";
    }
}

/* Плеер */
.youtube-video-container {
    position: relative; width: 100%; padding-top: 56.25%;
    border-radius: 16px; overflow: hidden; background: #000;
}
.youtube-video-container iframe { position: absolute; inset: 0; width: 100%; height: 100%; border: 0; }

/* Календарь: сетка (minmax(0,1fr) — чтобы 7 колонок сжимались на узких) */
.cal-nav { display:flex; align-items:center; justify-content:space-between; gap:8px; margin: 10px 0; }
.stream-cal-head, .stream-cal-grid { display:grid; grid-template-columns:repeat(7, minmax(0,1fr)); gap:6px; }
.stream-cal-head div { text-align:center; font-weight:600; opacity:.8; }
.stream-cal-grid .cell {
    text-align:center; padding:8px 6px; border-radius:10px;
    border:1px solid var(--md-sys-color-outline-dark);
    min-height:46px; display:flex; flex-direction:column; justify-content:center; gap:3px;
}
body.light-theme .stream-cal-grid .cell { border-color: var(--md-sys-color-outline-light); }
.stream-cal-grid .cell a { color: var(--md-sys-color-primary-dark); text-decoration: underline; font-size:.9rem; }
.stream-cal-grid .cell.today { outline:2px solid var(--md-sys-color-primary-dark); }
body.light-theme .stream-cal-grid .cell.today { outline:2px solid var(--md-sys-color-primary-light); }
.stream-cal-grid .cell.fri { background: rgba(187,134,252,.08); }
.stream-cal-grid .cell.passed.no-stream { opacity:.5; text-decoration: line-through; }

/* Легенда */
.legend { display:flex; align-items:center; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:10px; font-size:.95rem; }

/* Универсальные точки */
.dot { width:10px; height:10px; border-radius:50%; display:inline-block; }
.dot.yt { background:#FF4444; }
.dot.tw { background:#9146FF; }
.dot.both { background: linear-gradient(90deg, #FF4444 0 50%, #9146FF 50% 100%); }
.dot.planned { background:#2ECC71; }
.legend .muted { opacity:.75; }

/* SKIN */
.skin-viewer { display:grid; place-items:center; width:100%; height:20rem; background:transparent; border-radius:16px; }
#skin-canvas { display:block; width:100%; height:100%; }
@media (max-width: 767px){
    .skin-viewer { width:clamp(200px, 80vw, 320px); height:clamp(200px, 80vw, 320px); margin: 0 auto; }
}
/* Сверхузкие — ещё компактнее skin и чуть плотнее календарь */
@media (max-width: 360px){
    .skin-viewer { width:clamp(160px, 78vw, 300px); height:clamp(160px, 78vw, 300px); }
    .stream-cal-head, .stream-cal-grid { gap:4px; }
}

/* Мини‑кнопки анимаций */
.skin-controls { display:flex; justify-content:center; align-items:center; gap:10px; flex-wrap:wrap; max-width:100%; margin: 14px 0 10px; }
.mini-button {
    display:inline-flex; align-items:center; justify-content:center;
    height:44px; min-width:44px; padding:0 12px; border-radius:9999px;
    border:1px solid rgba(255,255,255,.1); background:#2d2d2d; color:#fff; cursor:pointer
}
.mini-button .material-symbols-outlined { font-size:18px; line-height:1; color: currentColor; }
.mini-button.active { background: var(--md-sys-color-primary-dark); color:#000; border-color: transparent; }
body.light-theme .mini-button { background: var(--md-sys-color-surface-container-low-light); color: var(--md-sys-color-on-surface-light); border-color: rgba(0,0,0,.10); }
body.light-theme .mini-button.active { background: var(--md-sys-color-primary-light); color: var(--md-sys-color-on-primary-light); border-color: transparent; }

/* Видео-карусель */
.video-carousel::-webkit-scrollbar { height: 8px; }
.video-carousel::-webkit-scrollbar-track { background: rgba(255,255,255,0.1); border-radius: 10px; }
body.light-theme .video-carousel::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); }
.video-carousel::-webkit-scrollbar-thumb { background: var(--md-sys-color-outline-dark); border-radius: 10px; }
body.light-theme .video-carousel::-webkit-scrollbar-thumb { background: var(--md-sys-color-outline-light); }
.video-carousel::-webkit-scrollbar-thumb:hover { background: var(--md-sys-color-primary-dark); }
body.light-theme .video-carousel::-webkit-scrollbar-thumb:hover { background: var(--md-sys-color-primary-light); }

/* Мобайл: одинаковая ширина верхних секций, как у Navigation/Calendar */
@media (max-width: 767px) {
    #page-wrap { padding-left: 16px; padding-right: 16px; }
    #page-wrap > .hero,
    #page-wrap > .about-card,
    #page-wrap > .home-grid {
        margin-left: 0 !important;
        margin-right: 0 !important;
        width: 100% !important;
    }
    #timeline { max-width: none; margin-left: 0; margin-right: 0; }
}

/* На очень узких делаем кнопку навигации адаптивной по ширине */
@media (max-width: 452px) {
    #links-cta .primary-button { width: 100%; justify-content: center; }
    #links-cta .primary-button span { white-space: normal; }
}

/* На устройствах без hover — без «подскока», чтобы не дёргалось */
@media (hover: none) {
    .card:hover { transform: none; box-shadow: inherit; }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
    #timeline details.card summary .material-symbols-outlined { transition: none; }
}